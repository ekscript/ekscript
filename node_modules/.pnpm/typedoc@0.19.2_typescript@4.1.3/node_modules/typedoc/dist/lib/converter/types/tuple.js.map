{"version":3,"file":"tuple.js","sourceRoot":"","sources":["../../../../src/lib/converter/types/tuple.ts"],"names":[],"mappings":";;;;;;;;;AAAA,iCAAiC;AAEjC,oDAA2D;AAC3D,8CAAoG;AAEpG,oDAA4D;AAG5D,IAAa,cAAc,GAA3B,MAAa,cAAe,SAAQ,mCAAsB;IAItD,YAAY,CAAC,QAAiB,EAAE,IAAsB;QAClD,OAAO,IAAI,CAAC,IAAI,KAAK,EAAE,CAAC,UAAU,CAAC,SAAS,CAAC;IACjD,CAAC;IAKD,YAAY,CAAC,OAAgB,EAAE,IAAsB;QAEjD,IAAI,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,EAAE;YACzC,OAAO,IAAI,CAAC;SACf;QAGD,IAAI,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC,SAAS,EAAE;YAC7C,IAAI,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC,KAAK,EAAE;gBAChD,OAAO,IAAI,CAAC;aACf;SACJ;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAeD,WAAW,CAAC,OAAgB,EAAE,IAAsB;;QAEhD,MAAM,YAAY,SAAG,IAAI,CAAC,QAAQ,mCAAK,IAAY,CAAC,YAAY,CAAC;QACjE,MAAM,QAAQ,GAAW,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;QACxE,OAAO,IAAI,iBAAS,CAAC,QAAQ,CAAC,CAAC;IACnC,CAAC;IAeD,WAAW,CAAC,OAAgB,EAAE,IAAsB;QAEhD,MAAM,QAAQ,GAAW,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,SAAS,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACzF,OAAO,IAAI,iBAAS,CAAC,QAAQ,CAAC,CAAC;IACnC,CAAC;CACJ,CAAA;AAjEY,cAAc;IAD1B,sBAAS,CAAC,EAAC,IAAI,EAAE,YAAY,EAAC,CAAC;GACnB,cAAc,CAiE1B;AAjEY,wCAAc;AAoE3B,IAAa,yBAAyB,GAAtC,MAAa,yBAA0B,SAAQ,mCAAsB;IACjE,YAAY,CAAC,QAAiB,EAAE,IAAa;QAEzC,OAAO,EAAE,CAAC,kBAAkB,IAAI,EAAE,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;IAChE,CAAC;IAED,WAAW,CAAC,OAAgB,EAAE,IAAyB;QACnD,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QAC7D,IAAI,CAAC,SAAS,EAAE;YACZ,OAAO;SACV;QAED,OAAO,IAAI,wBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;IACtF,CAAC;CACJ,CAAA;AAdY,yBAAyB;IADrC,sBAAS,CAAC,EAAE,IAAI,EAAE,yBAAyB,EAAE,CAAC;GAClC,yBAAyB,CAcrC;AAdY,8DAAyB","sourcesContent":["import * as ts from 'typescript';\n\nimport { Type, TupleType } from '../../models/types/index';\nimport { Component, ConverterTypeComponent, TypeConverter, TypeNodeConverter } from '../components';\nimport { Context } from '../context';\nimport { NamedTupleMember } from '../../models/types/tuple';\n\n@Component({name: 'type:tuple'})\nexport class TupleConverter extends ConverterTypeComponent implements TypeConverter<ts.TypeReference, ts.TupleTypeNode> {\n    /**\n     * Test whether this converter can handle the given TypeScript node.\n     */\n    supportsNode(_context: Context, node: ts.TupleTypeNode): boolean {\n        return node.kind === ts.SyntaxKind.TupleType;\n    }\n\n    /**\n     * Test whether this converter can handle the given TypeScript type.\n     */\n    supportsType(context: Context, type: ts.TypeReference): boolean {\n        // If this type is a tuple\n        if (type.objectFlags & ts.ObjectFlags.Tuple) {\n            return true;\n        }\n\n        // If this type points to a tuple\n        if (type.objectFlags & ts.ObjectFlags.Reference) {\n            if (type.target.objectFlags & ts.ObjectFlags.Tuple) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Convert the given tuple type node to its type reflection.\n     *\n     * This is a node based converter, see [[convertTupleType]] for the type equivalent.\n     *\n     * ```\n     * let someValue: [string,number];\n     * ```\n     *\n     * @param context  The context object describing the current state the converter is in.\n     * @param node  The tuple type node that should be converted.\n     * @returns The type reflection representing the given tuple type node.\n     */\n    convertNode(context: Context, node: ts.TupleTypeNode): TupleType {\n        // TS 3.9 support\n        const elementTypes = node.elements ?? (node as any).elementTypes;\n        const elements: Type[] = this.owner.convertTypes(context, elementTypes);\n        return new TupleType(elements);\n    }\n\n    /**\n     * Convert the given tuple type to its type reflection.\n     *\n     * This is a type based converter, see [[convertTupleTypeNode]] for the node equivalent.\n     *\n     * ```\n     * let someValue: [string,number];\n     * ```\n     *\n     * @param context  The context object describing the current state the converter is in.\n     * @param type  The tuple type that should be converted.\n     * @returns The type reflection representing the given tuple type.\n     */\n    convertType(context: Context, type: ts.TypeReference): TupleType {\n        // TODO: We might be able to have named tuple elements here.\n        const elements: Type[] = this.owner.convertTypes(context, undefined, type.typeArguments);\n        return new TupleType(elements);\n    }\n}\n\n@Component({ name: 'type:named-tuple-member' })\nexport class NamedTupleMemberConverter extends ConverterTypeComponent implements TypeNodeConverter<ts.Type, ts.NamedTupleMember> {\n    supportsNode(_context: Context, node: ts.Node) {\n        // TS 3.9 support\n        return ts.isNamedTupleMember && ts.isNamedTupleMember(node);\n    }\n\n    convertNode(context: Context, node: ts.NamedTupleMember): NamedTupleMember | undefined {\n        const innerType = this.owner.convertType(context, node.type);\n        if (!innerType) {\n            return;\n        }\n\n        return new NamedTupleMember(node.name.getText(), !!node.questionToken, innerType);\n    }\n}\n"]}